[uwsgi]
# Application
module = hiddifypanel:create_app()
socket = 127.0.0.1:9001
http-socket = 127.0.0.1:9000
uid = hiddify-panel

# Buffer and request size
buffer-size = 65536
post-buffering = 65536
post-buffering-bufsize = 65536

# Worker management - optimized for low memory VPS
master = true
workers = 4
cheaper-algo = busyness
cheaper = 1
cheaper-initial = 2
cheaper-step = 1
cheaper-overload = 5
cheaper-idle = 30
cheaper-busyness-multiplier = 30
cheaper-busyness-min = 20
cheaper-busyness-max = 70

# Request handling
harakiri = 60
harakiri-verbose = true
max-requests = 1000
max-worker-lifetime = 3600
reload-on-rss = 512
worker-reload-mercy = 10

# Performance optimizations
thunder-lock = true
lazy-apps = true
enable-threads = true
single-interpreter = true

# Socket optimizations
listen = 128
so-keepalive = true
http-timeout = 60
socket-timeout = 60

# Memory management
limit-as = 1500
reload-on-as = 1024
memory-report = true

# Stats and monitoring
stats = 127.0.0.1:1717
stats-http = true

# Graceful shutdown
die-on-term = true
graceful-timeout = 30
vacuum = true

# Logging optimizations
log-slow = 2000
log-date = true
disable-logging = false
