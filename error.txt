root@opsopsops:/opt/hiddify-manager# cd /opt/hiddify-manager/hiddify-panel
root@opsopsops:/opt/hiddify-manager/hiddify-panel# source /opt/hiddify-manager/.venv313/bin/activate
(.venv313) root@opsopsops:/opt/hiddify-manager/hiddify-panel# python -c "
> from hiddifypanel.base import create_app
> app = create_app()
> with app.app_context():
>     with app.test_client() as client:
>         resp = client.get('/pR0o8D0xj5pMxPd53uddjR2YPMRyRn/b2be82c2-87f9-4fb5-9df5-5e9f4f8b1cd4/singbox/')
>         print('Status:', resp.status_code)
>         print('Error:', resp.data[:1000] if resp.data else 'EMPTY')
> "
2026-01-01 13:52:46 | ERROR    | hiddifypanel.panel.common:internal_server_error:46 - 'ascii' codec can't decode byte 0xd8 in position 1: ordinal not in range(128)Traceback (most recent call last):

  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_babel/__init__.py", line 611, in get_translations
    return cache[str(locale), self.domain[0]]

KeyError: ('fa', 'messages')


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 6, in <module>
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/werkzeug/test.py", line 1162, in get
    return self.open(*args, **kw)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/testing.py", line 235, in open
    response = super().open(
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/werkzeug/test.py", line 1116, in open
    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/werkzeug/test.py", line 988, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/werkzeug/test.py", line 1264, in run_wsgi_app
    app_rv = app(environ, start_response)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/app.py", line 1498, in __call__
    return self.wsgi_app(environ, start_response)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sonora/wsgi.py", line 247, in __call__
    return self._application(environ, start_response)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/werkzeug/middleware/proxy_fix.py", line 183, in __call__
    return self.app(environ, start_response)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/app.py", line 1473, in wsgi_app
    response = self.full_dispatch_request()
> File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/app.py", line 865, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_classful.py", line 303, in proxy
    response = view(**request.view_args)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_classful.py", line 271, in inner
    return fn(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/auth.py", line 130, in decorated_view
    return fn(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/apiflask/scaffold.py", line 97, in wrapper
    return current_app.ensure_sync(f)(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/panel/user/user.py", line 73, in singbox_full
    return self.full_singbox_imp()
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/auth.py", line 130, in decorated_view
    return fn(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/apiflask/scaffold.py", line 97, in wrapper
    return current_app.ensure_sync(f)(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/panel/user/user.py", line 240, in full_singbox_imp
    c = get_common_data(g.account.uuid, mode)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/panel/user/user.py", line 358, in get_common_data
    domains, db_domain, has_auto_cdn = get_domain_information(no_domain, filter_domain, request.host)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/panel/user/user.py", line 330, in get_domain_information
    hutils.flask.flash(_("This domain does not exist in the panel!" + domain))
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_babel/__init__.py", line 756, in gettext
    return get_domain().gettext(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_babel/__init__.py", line 648, in gettext
    t = self.get_translations()
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_babel/__init__.py", line 623, in get_translations
    catalog = support.Translations.load(
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/babel/support.py", line 662, in load
    return cls(fp=fp, domain=domain)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/babel/support.py", line 635, in __init__
    super().__init__(fp=fp)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/babel/support.py", line 393, in __init__
    super().__init__(fp=fp)
  File "/usr/local/share/uv/cpython-3.13.11-linux-x86_64-gnu/lib/python3.13/gettext.py", line 279, in __init__
    self._parse(fp)
  File "/usr/local/share/uv/cpython-3.13.11-linux-x86_64-gnu/lib/python3.13/gettext.py", line 433, in _parse
    catalog[str(msg, charset)] = str(tmsg, charset)

UnicodeDecodeError: 'ascii' codec can't decode byte 0xd8 in position 1: ordinal not in range(128)


Status: 500
Error: b'{"detail":["/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/app.py:880 full_dispatch_request: rv = self.dispatch_request()","/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/app.py:865 dispatch_request: return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]","/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_classful.py:303 proxy: response = view(**request.view_args)","/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_classful.py:271 inner: return fn(*args, **kwargs)","/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/auth.py:130 decorated_view: return fn(*args, **kwargs)","/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/apiflask/scaffold.py:97 wrapper: return current_app.ensure_sync(f)(*args, **kwargs)","/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/panel/user/user.py:73 singbox_full: return self.full_singbox_imp()",'
(.venv313) root@opsopsops:/opt/hiddify-manager/hiddify-panel#