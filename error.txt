root@opsopsops:/opt/hiddify-manager# cat /opt/hiddify-manager/log/system/hiddify-panel.log | tail -100
cat: /opt/hiddify-manager/log/system/hiddify-panel.log: No such file or directory
root@opsopsops:/opt/hiddify-manager# journalctl -u hiddify-panel --since "3 minutes ago" --no-pager
-- No entries --
root@opsopsops:/opt/hiddify-manager# clear
root@opsopsops:/opt/hiddify-manager# cd /opt/hiddify-manager/hiddify-panel
root@opsopsops:/opt/hiddify-manager/hiddify-panel# source /opt/hiddify-manager/.venv313/bin/activate
(.venv313) root@opsopsops:/opt/hiddify-manager/hiddify-panel# python -c "
> from hiddifypanel.base import create_app
> app = create_app()
> with app.app_context():
>     from flask import Flask
>     with app.test_client() as client:
>         resp = client.get('/pR0o8D0xj5pMxPd53uddjR2YPMRyRn/b2be82c2-87f9-4fb5-9df5-5e9f4f8b1cd4/singbox/')
>         print('Status:', resp.status_code)
>         print('Data:', resp.data[:500] if resp.data else 'EMPTY')
> "
Traceback (most recent call last):
  File "<string>", line 3, in <module>
    app = create_app()
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/base.py", line 58, in create_app
    app.config.load_extensions("EXTENSIONS")
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/dynaconf/contrib/flask_dynaconf.py", line 231, in load_extensions
    initializer(app)
    ~~~~~~~~~~~^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/celery.py", line 46, in init_app
    backup_interval = int(hconfig(ConfigEnum.backup_interval) or "6")
                          ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/redis_cache/__init__.py", line 231, in inner
    parsed_result = fn(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/models/config.py", line 64, in hconfig
    child_id = Child.current().id
               ~~~~~~~~~~~~~^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/models/child.py", line 74, in current
    child = Child.by_id(0)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/models/child.py", line 64, in by_id
    return db.session.query(Child).filter(Child.id == id).first()
           ~~~~~~~~~~~~~~~~^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/orm/scoping.py", line 1666, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/orm/scoping.py", line 195, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/util/_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask_sqlalchemy/session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
(.venv313) root@opsopsops:/opt/hiddify-manager/hiddify-panel# tail -f /var/log/syslog | grep -i hiddify &
[1] 487541
(.venv313) root@opsopsops:/opt/hiddify-manager/hiddify-panel# curl "http://127.0.0.1:9000/pR0o8D0xj5pMxPd53uddjR2YPMRyRn/b2be82c2-87f9-4fb5-9df5-5e9f4f8b1cd4/singbox/"2026-01-01T03:26:03.431376+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 217.
2026-01-01T03:26:03.449737+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:03.462267+03:30 opsopsops HiddifyCli[487532]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:03.462368+03:30 opsopsops HiddifyCli[487532]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:03.462413+03:30 opsopsops HiddifyCli[487532]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:03.463514+03:30 opsopsops HiddifyCli[487532]: Running in standalone mode
2026-01-01T03:26:03.483887+03:30 opsopsops HiddifyCli[487532]: Refresh interval: 0
2026-01-01T03:26:03.484079+03:30 opsopsops HiddifyCli[487532]: Convert using json
2026-01-01T03:26:03.490201+03:30 opsopsops HiddifyCli[487532]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:03.491140+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully.
2026-01-01T03:26:06.680623+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 218.
2026-01-01T03:26:06.689783+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:06.716037+03:30 opsopsops HiddifyCli[487542]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:06.716137+03:30 opsopsops HiddifyCli[487542]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:06.716508+03:30 opsopsops HiddifyCli[487542]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:06.718624+03:30 opsopsops HiddifyCli[487542]: Running in standalone mode
2026-01-01T03:26:06.733299+03:30 opsopsops HiddifyCli[487542]: Refresh interval: 0
2026-01-01T03:26:06.733879+03:30 opsopsops HiddifyCli[487542]: Convert using json
2026-01-01T03:26:06.741566+03:30 opsopsops HiddifyCli[487542]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:06.742427+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully.
2026-01-01T03:26:09.931548+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 219.
2026-01-01T03:26:09.943916+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:09.967520+03:30 opsopsops HiddifyCli[487550]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:09.967656+03:30 opsopsops HiddifyCli[487550]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:09.967699+03:30 opsopsops HiddifyCli[487550]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:09.969486+03:30 opsopsops HiddifyCli[487550]: Running in standalone mode
2026-01-01T03:26:09.989496+03:30 opsopsops HiddifyCli[487550]: Refresh interval: 0
2026-01-01T03:26:09.990063+03:30 opsopsops HiddifyCli[487550]: Convert using json
2026-01-01T03:26:09.998931+03:30 opsopsops HiddifyCli[487550]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:10.000883+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully.
2026-01-01T03:26:13.181274+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 220.
2026-01-01T03:26:13.200980+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:13.228343+03:30 opsopsops HiddifyCli[487569]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:13.228539+03:30 opsopsops HiddifyCli[487569]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:13.228620+03:30 opsopsops HiddifyCli[487569]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:13.232342+03:30 opsopsops HiddifyCli[487569]: Running in standalone mode
2026-01-01T03:26:13.251524+03:30 opsopsops HiddifyCli[487569]: Refresh interval: 0
2026-01-01T03:26:13.252110+03:30 opsopsops HiddifyCli[487569]: Convert using json
2026-01-01T03:26:13.260874+03:30 opsopsops HiddifyCli[487569]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:13.263038+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully.
2026-01-01T03:26:16.431593+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 221.
2026-01-01T03:26:16.443968+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:16.467770+03:30 opsopsops HiddifyCli[487577]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:16.468037+03:30 opsopsops HiddifyCli[487577]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:16.468098+03:30 opsopsops HiddifyCli[487577]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:16.470336+03:30 opsopsops HiddifyCli[487577]: Running in standalone mode
2026-01-01T03:26:16.489082+03:30 opsopsops HiddifyCli[487577]: Refresh interval: 0
2026-01-01T03:26:16.489672+03:30 opsopsops HiddifyCli[487577]: Convert using json
2026-01-01T03:26:16.497961+03:30 opsopsops HiddifyCli[487577]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:16.499590+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully.
2026-01-01T03:26:19.681656+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 222.
2026-01-01T03:26:19.699103+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:19.724291+03:30 opsopsops HiddifyCli[487587]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:19.724499+03:30 opsopsops HiddifyCli[487587]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:19.724559+03:30 opsopsops HiddifyCli[487587]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:19.727949+03:30 opsopsops HiddifyCli[487587]: Running in standalone mode
2026-01-01T03:26:19.746735+03:30 opsopsops HiddifyCli[487587]: Refresh interval: 0
2026-01-01T03:26:19.747613+03:30 opsopsops HiddifyCli[487587]: Convert using json
2026-01-01T03:26:19.756991+03:30 opsopsops HiddifyCli[487587]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:19.758733+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully.
2026-01-01T03:26:22.931394+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 223.
2026-01-01T03:26:22.938884+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:22.965196+03:30 opsopsops HiddifyCli[487595]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:22.965340+03:30 opsopsops HiddifyCli[487595]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:22.965379+03:30 opsopsops HiddifyCli[487595]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:22.967139+03:30 opsopsops HiddifyCli[487595]: Running in standalone mode
2026-01-01T03:26:22.986976+03:30 opsopsops HiddifyCli[487595]: Refresh interval: 0
2026-01-01T03:26:22.987464+03:30 opsopsops HiddifyCli[487595]: Convert using json
2026-01-01T03:26:22.995941+03:30 opsopsops HiddifyCli[487595]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:22.997599+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully.
2026-01-01T03:26:26.180897+03:30 opsopsops systemd[1]: hiddify-cli.service: Scheduled restart job, restart counter is at 224.
2026-01-01T03:26:26.189840+03:30 opsopsops systemd[1]: Started hiddify-cli.service - HiddifyCli service.
2026-01-01T03:26:26.218293+03:30 opsopsops HiddifyCli[487604]: DEBUG CORE libbox.Setup success ./tmp ./ ./tmp true
2026-01-01T03:26:26.218429+03:30 opsopsops HiddifyCli[487604]: DEBUG CORE StartGrpcServerByMode 127.0.0.1:17078 3
2026-01-01T03:26:26.219155+03:30 opsopsops HiddifyCli[487604]: DEBUG CORE grpcServer started on 127.0.0.1:17078
2026-01-01T03:26:26.223221+03:30 opsopsops HiddifyCli[487604]: Running in standalone mode
2026-01-01T03:26:26.234925+03:30 opsopsops HiddifyCli[487604]: Refresh interval: 0
2026-01-01T03:26:26.235176+03:30 opsopsops HiddifyCli[487604]: Convert using json
2026-01-01T03:26:26.242144+03:30 opsopsops HiddifyCli[487604]: Error in read and build config failed to parse config content: [SingboxParser] unmarshal error: unexpected end of JSON input
2026-01-01T03:26:26.244176+03:30 opsopsops systemd[1]: hiddify-cli.service: Deactivated successfully
